class MySudoku{constructor(i,t=0){this.squareSize=i,this.boardSize=i*i,this.blank=t,this.boardRowPoint=0,this.boardColPoint=0,this.squareColPoint=0,this.board=new Array,this.row=new Array,this.squares=new Object,this.fieldChecked=new Object,this.firstIdxs=new Array,this.countGeneratedTimes=0,this.countRowFilledTimes=0,this.fillBoard(),this.fillRow(),this.fillSquares(),this.fillFirstIdxs(),this.fillFieldChecked(),this.create()}fillBoard=function(){for(let t=0;t<this.boardSize;t++){this.board[t]=new Array;for(let i=0;i<this.boardSize;i++)this.board[t][i]=this.blank}};fillRow=function(){for(let i=0;i<this.boardSize;i++)this.row[i]=this.blank};fillSquares=function(){for(let e=0;e<this.squareSize;e++){this.squares[e]=new Array;for(let t=0;t<this.squareSize;t++){this.squares[e][t]=new Array;for(let i=0;i<this.squareSize;i++)this.squares[e][t][i]=this.blank}}};fillFirstIdxs=function(){for(let i=0,t=0;i<this.squareSize;i++)this.firstIdxs[i]=t,t+=this.squareSize};fillFieldChecked=function(){for(let i=0;i<this.boardSize;i++)this.fieldChecked[i]=!1};countFilledFields=function(t=this.boardColPoint,e=this.squareColPoint,i=this.boardRowPoint){let s=0,r=this.squareSize,o=0,h=0,a=0;for(let i=0;i<this.squareSize;i++){if(t>=s&&t<r){o=this.firstIdxs[i];break}s+=this.squareSize,r+=this.squareSize}for(let i=0;i<this.squareSize;i++){if(e==i){h=a;break}a+=this.squareSize}return i+o+h};checkNumInRow=i=>-1!=this.row.indexOf(i);checkNumInSquares=function(e){let i=0,s=this.squareSize;for(let t=0;t<this.squareSize;t++){if(this.boardRowPoint>=i&&this.boardRowPoint<s){for(let i=0;i<this.squareSize;i++)if(-1!=this.squares[t][i].indexOf(e))return!0;break}i+=this.squareSize,s+=this.squareSize}return!1};checkNumInCol=function(t){for(let i=0;i<this.boardSize;i++)if(this.board[i][this.boardRowPoint]==t)return!0;return!1};bigReset=function(){let t=0,e=this.squareSize,s;for(let i=0;i<this.squareSize;i++){if(this.boardColPoint>=t&&this.boardColPoint<e){s=i;break}t+=this.squareSize,e+=this.squareSize}let r=this.firstIdxs.slice(0);this.boardColPoint=r[s];for(let i=0;i<this.squareSize;i++)this.board[r[s]++].fill(this.blank,0);for(let t=0;t<this.squareSize;t++)for(let i=0;i<this.squareSize;i++)this.squares[t][i].fill(this.blank,0);for(var i in this.squareColPoint=0,this.countRowFilledTimes=0,this.row.fill(this.blank,0),this.boardRowPoint=0,this.fieldChecked)this.fieldChecked[i]=!1};possibleNums=function(){let s=new Array;for(let i=0;i<this.boardSize;i++)s[i]=i+1;for(let t=0;t<s.length;t++)for(let i=0;i<this.boardSize;i++)s[t]==this.board[i][this.boardRowPoint]&&s.splice(t--,1);let i=0,t=this.squareSize;for(let e=0;e<this.squareSize;e++){if(this.boardRowPoint>=i&&this.boardRowPoint<t){for(let t=0;t<this.squareSize;t++)for(let i=0;i<s.length;i++)-1!=this.squares[e][t].indexOf(s[i])&&s.splice(i--,1);break}i+=this.squareSize,t+=this.squareSize}if(!s.length)return this.bigReset();for(let i=0;i<s.length;i++)-1!=this.row.indexOf(s[i])&&s.splice(i--,1);if(s.length)this.fieldChecked[this.boardRowPoint]=!0;else{if(this.countRowFilledTimes>this.boardSize*this.boardSize)return this.bigReset();for(var e in this.row.fill(this.blank,0),this.boardRowPoint=0,this.countRowFilledTimes++,this.fieldChecked)this.fieldChecked[e]=!1}};generateNumber=function(){let i=Math.ceil(Math.random()*this.boardSize),t=this.countFilledFields();for(;this.checkNumInRow(i)||this.checkNumInSquares(i)||this.checkNumInCol(i);)this.countGeneratedTimes++,!this.fieldChecked[this.boardRowPoint]&&t>=this.boardSize&&this.possibleNums(),i=Math.ceil(Math.random()*this.boardSize);return i};printInRow=function(){for(;this.boardRowPoint<this.boardSize;){var i=this.generateNumber();this.row[this.boardRowPoint++]=i}for(var t in this.boardRowPoint=0,this.countRowFilledTimes=0,this.fieldChecked)this.fieldChecked[t]=!1};printInSquares=function(){let t=0;for(let i=0;i<this.squareSize;i++)this.squares[i][this.squareColPoint]=this.row.slice(this.firstIdxs[t],this.firstIdxs[++t]);if(this.squareColPoint++,this.squareColPoint>=this.squareSize){for(let t=0;t<this.squareSize;t++)for(let i=0;i<this.squareSize;i++)this.squares[t][i].fill(this.blank,0);this.squareColPoint=0}};printInBoard=function(){this.board[this.boardColPoint++]=this.row.slice(0),this.row.fill(this.blank,0)};create=function(){for(;this.boardColPoint<this.boardSize;)this.printInRow(),this.printInSquares(),this.printInBoard()}}